<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>event handler example</title>
  </head>

  <body>
    <div id="root">
      <input id="user-text" />
      <ul id="list"></ul>
    </div>

    <script id="procedures">
      debugger; // once when the procedures are declared

      const addListItem = text => {
        const newListItemEl = document.createElement('li');
        newListItemEl.innerText = `[x] ${text}`;
        newListItemEl.addEventListener('click', handleRemoveItem);

        document.getElementById('list').appendChild(newListItemEl);
      };
    </script>

    <script id="handlers">
      debugger; // once when the handlers

      const handleRemoveItem = event => {
        debugger; // each time a user clicks on a list item
        console.log('removing an item');

        const listItem = event.target;
        const list = listItem.parentElement;

        list.removeChild(listItem);
      };

      const handleAddItem = event => {
        debugger; // each time a user lifts a key in the input
        if (event.keyCode !== 13) {
          return;
        }
        console.log('adding an item');

        const newText = document.getElementById('user-text').value;
        addListItem(newText);
      };
    </script>

    <script id="listeners">
      debugger; // once when the listeners are attached

      document
        .getElementById('user-text')
        .addEventListener('keyup', handleAddItem);
    </script>
  </body>
</html>
